{% extends "navbar.html" %}
{% block title %}Request Form{% endblock %}
{% block content %}
<html lang="en">
<head>
    <!--for image attachment-->
    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css"
          rel="stylesheet" type="text/css"/>
    <!--    for datepicker-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css"/>
    <!--    mapbox-->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet'/>
    <!--    mapbox geocoder-->
    <link rel="stylesheet"
          href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css"
          type="text/css">
</head>
<body>

<main class="container ">
    <br>
    <form>
        <div class="form-row justify-content-center">
            <div class="form-group col-md-6">
                <label for="missingName">Full Name</label>
                <input type="text" class="form-control" id="missingName" placeholder="Full Name">
            </div>
            <div class="form-group col-md-2">
                <label for="missingDob">Date of Birth</label>
                <input id="missingDob" readonly>
            </div>
            <div class="form-group col-md-2">
                <label class="mr-sm-2" for="genderSelect">Gender</label>
                <select class="custom-select mr-sm-2" id="genderSelect">
                    <option value="1">Male</option>
                    <option value="2">Female</option>
                    <option value="3">Rather not say</option>
                </select>
            </div>
        </div>
        <div class="form-row justify-content-center">
            <div class="form-group col-md-10">
                <label for="missingSearch">Last Seen Location</label>
                <div id="missingSearch" class="geocoder"></div>
                <div id='rqstmap' style='width: 100%; height: 325px;'></div>
            </div>
        </div>
        <div class="form-row justify-content-center">
            <div class="form-group col-md-10">
                <label for="imageFile">Images</label>
                <input type="file" accept=".jpg,.gif,.png" onchange="readURL(this);" class="form-control-file"
                       id="imageFile" multiple="multiple">
                <br>
                <img id="misingimg"/>
                <br>
            </div>
        </div>
        <div class="form-row justify-content-center">
            <button type="submit" class="btn btn-primary center">Submit</button>
        </div>
    </form>

    <style>
    .mapboxgl-ctrl-geocoder {
        display: block;
        width: 100%;
        height: calc(1.5em + .75rem + 2px);
        padding: -23px;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        min-width: 100%;
        box-shadow: none;
    }

    #rqstmap {
        margin-top: 10px;
    }

    </style>

</main>
<!--for image attachment-->
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
<!--for datepicker-->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<!--mapbox-->
<script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
<!--    mapbox geocoder-->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>

<script type="text/javascript">
<!--datepicker-->
    $('#missingDob').datepicker({
            uiLibrary: 'bootstrap4'
        });

<!--image attachment-->
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#misingimg')
                .attr('src', e.target.result)
                .width(250)
                .height(250);
        };
        reader.readAsDataURL(input.files[0]);
    }
}

<!--        mapbox-->
mapboxgl.accessToken = 'pk.eyJ1IjoibWlzc2luZ3BlcnNvbnRlc3RpbmciLCJhIjoiY2t0MnBqajR5MDBiZTJxbnd3Zm91b3kwOCJ9.3fL2XKMWcaJ_-k3hE-oU7w';
    var rqstmap = new mapboxgl.Map({
        container: 'rqstmap',
        style: 'mapbox://styles/mapbox/streets-v11'
    });

rqstmap.addControl(
new mapboxgl.GeolocateControl({
    positionOptions: {
        enableHighAccuracy: true
    },
<!--    When active the map will receive updates to the device's location as it changes.-->
    trackUserLocation: true,
<!--    Draw an arrow next to the location dot to indicate which direction the device is heading.-->
    showUserHeading: true
    })
);

<!--geocoder-->
const geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken,
    mapboxgl: mapboxgl
});

document.getElementById('geocoder').appendChild(geocoder.onAdd(rqstmap));

</script>
</body>
{% endblock %}